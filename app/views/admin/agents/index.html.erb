<% form_tag edit_multiple_admin_agents_path, :id => "agent_index_form" do %>
	<div class="container_12">
		<h2>Agents</h2>
		<p>
			This is a list of all the agents currently on the roster. From here you can view, modify, or delete any agent.
		</p>
		<div class="clearfix">&nbsp;</div>
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tbody>
				<tr class="even">
					<th scope="col">
						<input class="check_all" type="checkbox">
					</th>
					<th scope="col">
						<% if params[:sort] == "id" and params[:order] == "ASC" %>
							<%= link_to("ID", admin_agents_path(:order => "DESC", :sort => :id)) %>
						<% else %>
							<%= link_to("ID", admin_agents_path(:order => "ASC", :sort => :id)) %>
						<% end %>
					</th>
					<th scope="col">
						<% if params[:sort] == "person_id" and params[:order] == "ASC" %>
							<%= link_to("Person ID", admin_agents_path(:order => "DESC", :sort => :person_id)) %>
						<% else %>
							<%= link_to("Person ID", admin_agents_path(:order => "ASC", :sort => :person_id)) %>
						<% end %>
					</th>
					<th scope="col">
						Name
					</th>
					<th scope="col">
						<% if params[:sort] == "created_at" and params[:order] == "ASC" %>
							<%= link_to("Created At", admin_agents_path(:order => "DESC", :sort => :created_at)) %>
						<% else %>
							<%= link_to("Created At", admin_agents_path(:order => "ASC", :sort => :created_at)) %>
						<% end %>
					</th>
					<th scope="col">
						<% if params[:sort] == "updated_at" and params[:order] == "ASC" %>
							<%= link_to("Updated At", admin_agents_path(:order => "DESC", :sort => :updated_at)) %>
						<% else %>
							<%= link_to("Updated At", admin_agents_path(:order => "ASC", :sort => :updated_at)) %>
						<% end %>
					</th>
					<th scope="col">
						Actions
					</th>
				</tr>
				<% even_row = false %>
				<% for agent in @agents %>
					<%if even_row %><tr class="even"><% else %><tr><% end %><% even_row = !even_row %>
						<td scope="col">
							<%= check_box_tag "agent_ids[]", agent.id %>
						</td>
						<td scope="col"><%= link_to(agent.id, admin_agent_path(agent)) %></td>
						<td scope="col"><%= agent.person_id %></td>
						<td scope="col"><%= agent.person.first_name + " " + agent.person.last_name %></td>
						<td scope="col"><%= agent.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
						<td scope="col"><%= agent.updated_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
						<td scope="col">
							<%= link_to image_tag(image_path("icons/16x16/edit.png"), :border => "0", :title => "Edit", :alt => "Edit"), edit_admin_agent_path(agent) %>
							<%= link_to image_tag(image_path("icons/16x16/remove.png"), :border => "0", :title => "Delete", :alt => "Delete"), admin_agent_path(agent), :method => :delete, :confirm => "Are you sure you want to delete this person? This action cannot be undone!" %>
						</td>
					</tr>
				<% end %>
			</tbody>
		</table>
		<div class="grid_12">
			<div class="clearfix">&nbsp;</div>
			<div id="pagination">
				<%= will_paginate @agents %>
			</div>
		</div>
		<div class="clearfix">&nbsp;</div>
	</div>
<% end %>
